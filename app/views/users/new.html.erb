<script type="text/javascript" language="JavaScript">
jQuery(document).ready(function()
{
    jQuery("#user_login").blur(function()
    {
        //check the username exists or not from ajax
        jQuery.post('<%=is_login_available_users_url%>',{ user_login:$(this).val() } ,function(data)
        {
        	jQuery("#availibility").html(data);    
        }); 
    });
		
		jQuery("#user_login").keydown(function() { 
			jQuery("#availibility").html(''); 
		});
		
});
</script>

<div id="login_form">
	
	<% form_for :user, :url => users_path, :html => {:id => "register"} do |f| -%>
	
    <h1><%= "Sign-up Now" %></h1>
    <div class="instruction">Welcome to <%= GlobalConfig.application_url_name %></div>
    <div class="instruction"><p>Already a member? <a href="<%=login_url%>">Sign in now</a></p></div>
		<%= error_messages_for :user -%>		

		<div class="row">
			<label for="user_login">Choose a Member Name<em>*</em></label>
			<%= f.text_field :login, {  :class => "text-field" } -%><span id="availibility"></span>
		</div>
		    
		<div class="row">
			<label for="user_email">Email Address <em>*</em></label>
	 		<%= f.text_field :email, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_password">Password <em>*</em></label>		
			<%= f.password_field :password, {  :class => "text-field" } -%>
		</div>
		
		<div class="row">
			<label for="user_password_confirmation">Confirm Password <em>*</em></label>
			<%= f.password_field :password_confirmation, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_city">City <em>*</em></label>
	 		<%= f.text_field :city, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_state">State <em>*</em></label>
	 		<%= f.select :state, @states %>
		</div>

		<div class="row">
			<label for="user_zip">Postal Code <em>*</em></label>
	 		<%= f.text_field :zip, {  :class => "text-field" } -%>
		</div>
		
		<div class="row">
			<label for="user_country">Country <em>*</em></label>
	 		<%= f.select :country, @countries %>
		</div>
		
		<div class="row">
			<label for="user_organization">School District / University / Company:</label>
	 		<%= f.text_field :organization, {  :class => "text-field" } -%>
		</div>
    
		<div class="row">
			<label for="user_grade_experience">Grade Level Experience <em>*</em></label>
			<ul id="grade-level-expriences-selector" class="checkbox-list">
				<% @grade_level_experiences.each do |level| -%>
					<li><%= f.check_box :grade_level_experience_ids, {:checked => user_has_grade_level_experience?(level)}, "#{level.id}", ""  -%> <%= "#{level.name}" -%></li>
				<% end -%>
			</ul>	
		</div>
                
    <div class="row">
			<label for="user_phone">Phone </label>
	 		<%= f.text_field :phone, {  :class => "text-field" } -%>
		</div>
    
    <div class="row">
			<label for="user_phone2">Phone 2 </label>
	 		<%= f.text_field :phone2, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_first_language">First Language </label>
	 		<%= f.collection_select :first_language, @languages, :id, :english_name -%>
		</div>

		<div class="row">
			<label for="user_language">Other Language(s)</label>
			<ul class="checkbox-list">
				<% @languages.each do |language| -%>
					<li><%= f.check_box :language_ids, {:checked => user_speaks_language?(language)}, "#{language.id}", ""  -%> <%= "#{language.english_name}" -%></li>
				<% end -%>
			</ul>
		</div>
                
		<div class="row">
			<label for="user_why_joined"> A few words on why you joined TWB</label>
	 		<%= f.text_area :why_joined, {  :class => "text-area" } -%>
		</div>
                
		<div class="row">
			<label for="user_skills"> Additional Skills &amp; Interests</label>
	 		<%= f.text_area :skills, {  :class => "text-area" } -%>
		</div>

		<div class="row">
			<label for="user_occupation"> Occupation</label>
	 		<%= f.text_area :occupation, {  :class => "text-area" } -%>
		</div>

		<div class="row">
			<label for="user_aim_name">AOL Instant messenger </label>
	 		<%= f.text_field :aim_name, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_msn">MSN messenger </label>
	 		<%= f.text_field :msn, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_skype">Skype </label>
	 		<%= f.text_field :skype, {  :class => "text-field" } -%>
		</div>

		<div class="row">
			<label for="user_yahoo">Yahoo! Messenger </label>
	 		<%= f.text_field :yahoo, {  :class => "text-field" } -%>
		</div>

		<div class="row" id="terms-of-service">
			<%= f.check_box :terms_of_service -%>
			<label for="user_terms_of_service">I agree to the <a href="<%=tos_url%>" target="_blank">Terms and Conditions</a></label>																																						
		</div>

	  <div class="button">
	  	<%= f.submit 'Sign-up Now', :class => 'button' %>
	  </div>
	
	<% end %>
</div>